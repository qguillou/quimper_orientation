{% extends '::base.html.twig' %}

{% block javascript %}
  {{ parent() }}

  <script type='text/javascript'>
    function unregister(id) {
      $.ajax({
        url: "{{ path('course_unregister') }}",
        data: {
          'id': id
        },
        success: function(result) {
          $("#inscription").html(result);
        }
      });
    }

    $(function(){
      $("form").submit(function(event){
        event.preventDefault();

        //Fermeture du modal
        $("#ModalQuickEntries").modal('hide');
        //Enregistrement des inscrits
        $.ajax({
          url: "{{ path('course_register') }}",
          type: 'POST',
          data: {
            'id': {{ course.id }},
            'values': $(this).serializeArray()
          },
          success: function(result) {
            $("#inscription").html(result);
          }
        });
      });
    });
  </script>
{% endblock %}

<!-- On récupére la couleur d'affichage de la course !-->
{% set color = 'black' %}
{% if course.type and course.type.color and course.type.color != '' %}
{% set color = course.type.color %}
{% endif %}

{% block title %}
    {% include '::Navbar/title.html.twig' with {'title': course.nom, 'subtitle': "subtitle.course" | trans } %}
{% endblock %}

{% block content %}
<div class="col-md-4">
  {% include 'CalendarBundle:Course:partials/informations.html.twig' %}
</div>


<div class="col-md-1">
</div>

<div class="col-md-7">

  <div class="row">
    {% include 'CalendarBundle:Course:partials/files.html.twig' %}
  </div>

  <div class="row-divider"></div>

  <div id="inscription" class="row">
    {% include 'CalendarBundle:Course:partials/inscrits.html.twig' %}
  </div>

  <div class="row-divider"></div>

  <div class="row">
    <h2>Comment s'y rendre ?</h2>
    <p class="lead">Le plan d'accès vous montre le localisation du point d'accueil de l'événement.</p>
  </div>
</div>

{% include 'CalendarBundle:Course:forms/inscription.html.twig' %}

{% endblock %}
