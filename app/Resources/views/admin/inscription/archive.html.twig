{% extends 'base_admin.html.twig' %}

{% block body %}
<div class="col-md-6">
  <h1>Administration de l'archive fédérale</h1>
  <p class="lead">Attention, la mise à jour de l'archive peut prendre du temps, et l'opération doit être faite intégralement.</p>
  <div class="row">
    {% for successMessage in app.session.flashbag.get('success') %}
    <div class="alert alert-dismissible alert-success">
      {{ successMessage }}
    </div>
    {% endfor %}

    {% for errorMessage in app.session.flashbag.get('error') %}
    <div class="alert alert-dismissible alert-danger">
      {{ errorMessage }}
    </div>
    {% endfor %}

    {{ form_start(form, {'attr': {'class': 'form-horizontal'}}) }}
    <fieldset>
      {{ form_errors(form) }}

        {{ form_widget(form.save, {'attr': {'class': 'btn btn-primary'}}) }}
    </fieldset>
    {{ form_end(form) }}
  </div>

  <div class="row-divider"></div>

  <p class="lead">Cette opération est effectuée automatiquement une fois par jour (dans la nuit), néanmoins en début d'année (période de renouvellement des licences), l'archive évolue très vite, il est quelques fois nécessaire d'effectuer cette mise à jour.</p>
  <p>Dernière mise à jour faite le {{ get_date_archive() }}</p>
</div>

<div class="col-md-1"></div>

<div class="col-md-4">
  <div class="row">
    <h2>L'archive fédérale ? Qu'est ce que c'est ?</h2>
    <p>
      L'archive fédérale est un fichier CSV fournit par la FFCO, il liste tous les licenciés en temps réel.
      <br>
      Il contient toutes les informations, le nom, prénom, catégorie, numéro de puce, numéro de licence, ...
    </p>
  </div>

  <div class="row-divider"></div>

  <div class="row">
    <h2>&Agrave; quoi elle sert sur le site ?</h2>
    <p>
      Le site utilise l'archive fédérale pour son sytème d'inscription, et ainsi permettre de pré-remplir certains champs pour les utilisateurs.
      <br>
      Elle est surtout importante pour l'export des inscrits pour les logiciels de GEC, il est nécessaire d'avoir certaines informations pour compléter ses fichiers.
      Et les formulaires seraient bien trop long à remplir si pour chaque inscription un coureur devait le renseigner lui même.
    </p>
  </div>

  <div class="row">
    <h2>Pourquoi cette action peut prendre du temps ?</h2>
    <p>
      Déjà parce qu'il faut télécharger l'archive fédérale, puis ensuite le contenu du fichier est chargé dans la base de donnée.
    </p>
  </div>
</div>
{% endblock %}

{% block stylesheets %}
{% endblock %}
