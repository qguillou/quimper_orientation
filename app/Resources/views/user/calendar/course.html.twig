{% extends 'base.html.twig' %}

{% block body %}
<div class="col-md-12">
  <h1 style="color:{{course.getType().getColor()}}; font-weight:bold">{{course.getNom()}}</h1>
  <p class="lead">
    Retrouvez toutes les informations sur cet événement sur cette page.
  </p>
</div>

<div class="col-md-4">
  <h2>Informations sur la course</h2>
  <ul class="text-list information" style="border-color:{{course.getType().getColor()}}">
    <li><i class="fa fa-map-marker"></i> Lieu <p class="lead" style="color:{{course.getType().getColor()}}; font-weight:bold">{{course.getLieu()}}</p></li>
    <li><i class="fa fa-tag"></i> Type <p class="lead" style="color:{{course.getType().getColor()}}; font-weight:bold">{{course.getType().getNom()}}</p></li>
    <li><i class="fa fa-user"></i> Organisé par <p class="lead" style="color:{{course.getType().getColor()}}; font-weight:bold">{{course.getOrganisateur()}}</p></li>

    <li><i class="fa fa-sign-in"></i> Inscription
      {% if course.getInscription() %}

      {% if is_past(course.getModification() | date("Y-m-d H:i:s")) %}
      <p class="lead" style="color:{{course.getType().getColor()}}; font-weight:bold">Les inscriptions sont closes</p>
      {% else %}
      <p class="lead" style="color:{{course.getType().getColor()}}; font-weight:bold">Sur le site jusqu'au {{strftime(course.getModification() | date("Y-m-d H:i:s"), "%A %d %B à %H:%M:%S")}}</p>
      {% endif %}

      {% else %}
      <p class="lead" style="color:{{course.getType().getColor()}}; font-weight:bold">Voir avec l'organisateur</p>
      {% endif %}
    </li>
    {% if course.getGPS() != null %}
    <li><i class="fa fa-location-arrow"></i> Coordonnées GPS <p class="lead"  style="color:{{course.getType().getColor()}}; font-weight:bold">{{course.getGPS()}}</p></li>
    {% endif %}
  </ul>
</div>

<div class="col-md-1">
</div>

<div class="col-md-7">
  <div class="row">
    <h2>L'annonce de course, les horaires, le site, ...</h2>
    <p class="lead">Tous les fichiers importants liés à cette événement.</p>
    {% if course.getSite() != null %}
    <a href="{{course.getSite()}}" class="btn btn-square-toround btn-bordered-primary"><span class="fa fa-info"></span> Site Internet</a>
    {% endif %}

    {% if annonce_exists(course.getId()) %}
    <a href="/files/courses/{{course.getId()}}/annonce.pdf" target="_BLANK" class="btn btn-square-toround btn-bordered-info"><span class="fa fa-flag"></span> Annonce de course</a>
    {% endif %}

    {% for file in get_files(course.getId()) %}
    {% if is_file(file) %}
    <a href="/files/courses/{{course.getId()}}/autres/{{basename(file, '')}}" target="_BLANK" class="btn btn-square-toround btn-bordered-warning"><span class="fa fa-leaf"></span> {{basename(file, '.*')}}</a>
    {% endif %}
    {% endfor %}
  </div>

  <div class="row-divider"></div>

  <div class="row">
    <h2>Les inscrits</h2>
    <p class="lead">Ils sont déjà inscrits à cette course.</p>
    <table class="table table-striped table-hover ">
      <thead>
        <tr>
          <th>#</th>
          <th>Nom</th>
          <th>Prénom</th>
          <th>Circuit</th>
          <th>Commentaire</th>
        </tr>
      </thead>
      <tbody>
        {% set i = 0 %}
        {% for inscrit in course.getInscrits() %}
        {% set i = i + 1 %}
        <tr>
          <td>{{i}}</td>
          <td>{{inscrit.getNom()}}</td>
          <td>{{inscrit.getPrenom()}}</td>
          <td>{{inscrit.getCircuit()}}</td>
          <td>{{inscrit.getCommentaire()}}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <a href="" class="btn btn-square-toround btn-bordered-success"><span class="fa fa-user-plus"></span> S'inscrire</a>
    <a href="/inscription/modification" class="btn btn-square-toround btn-bordered-primary"><span class="fa fa-pencil-square-o"></span> Modifier ses inscriptions</a>
  </div>

  <div class="row-divider"></div>

  <div class="row">
    <h2>Comment s'y rendre ?</h2>
    <p class="lead">Le plan d'accès vous montre le localisation du point d'accueil de l'événement.</p>

  </div>
</div>
{% endblock %}

{% block stylesheets %}
{% endblock %}
